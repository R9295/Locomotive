<html>
    <head>
        <title>Create a User @ Locomotive</title>

        <!-- Connecting to Google Fonts API -->
<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Adding necessary JS and CSS files -->
       <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="{{url_for('static', filename='bootstrap.min.css')}}" rel="stylesheet" type="text/css">
    <script src="{{url_for('static', filename='jquery.min.js')}}"></script>
    <script src="{{url_for('static',filename='bootstrap.min.js')}}"></script>
   <link href="{{url_for('static', filename='font-awesome.min.css')}}" rel="stylesheet" type="text/css">



   <style>
     .form_create{
      font-family: 'Raleway',cursive;
      font-size: 22px;}

       body {
  background: url(/static/back_4.jpg) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;

       }
   </style>

  </head>



  <!-- Form Begin -->

  <body ng-app="app" ng-controller="create_user">
<br>
<br>
<br>
<br>


    <div class="container">
        <h1 style="font-family: 'Raleway', cursive;font-size: 100px;color:black;">Create User</h1>
        <br>

        <!-- Need to clean up styles here -->
        <form action="" method="post">

            <div id="example">
            <input type="text" placeholder="Username" name="create_username" class="form-control form_create" ng-model="username" required><br><br>





            <input type="password" placeholder="Password" name="create_password" ng-model="password" ng-change="password_verify()" class="form-control form_create" required><br><br>
             <input type="password" placeholder=" Re-enter Password" name="password_re_enter" ng-model="password_re_enter" ng-change="password_verify()" class="form-control form_create" required><br>
                <div ng-bind="password_error" class="text-danger bg-danger" style="font-family:Raleway;"></div>
                <br>


            <input type="text" placeholder="Phone Number" name="phone_number"  class="form-control form_create" ng-model="phone_number" ng-change="phone_verify()" required><br><br>
            <div ng-bind="phone_error" class="text-danger bg-danger" style="font-family:Raleway;"></div>

             <input type="email" placeholder="Email" name="email" class="form-control form_create" required><br><br>
                <input type="text" placeholder="Community" name="community" class="form-control form_create" required><br><br>
            <input class="btn btn-success" type="submit" value="Create!"  class="form-control form_create"><br><br>
        </div>
        </form>
        </div>

    <!--Incase of errors -->
      {% if error %}
        <p class="text-danger bg-danger"style="font-family: 'Raleway', cursive;font-size: 22px"><strong>Error:</strong> {{ error }}</p>
      {% endif %}

  </body>

{% if add_user == True %}
<script>
$(document).ready(function(){
$('#myModal').modal('show')
});
</script>
{% endif %}

<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Thanks for creating a user!</h4>
      </div>
      <div class="modal-body">
        <p>In order to use the account, you must activate it. The activation email has been sent to you. Please check your email and activate the account by clicking on the link we provided</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<script>
// onchange verification by Angular
var myapp = angular.module('app', []);
myapp.controller('create_user', function($scope) {

    $scope.password_verify = function() {
    if ($scope.password !== $scope.password_re_enter){
    $scope.password_error = "Passwords don't match";

    }else{
    $scope.password_error = '';
    }
    }


    $scope.phone_verify = function(){
    if ($scope.phone_number.length != 10){
    $scope.phone_error = 'Incorrect phone number';
    }
    else{
    $scope.phone_error = '';
    }

    }

});
</script>




</html>
